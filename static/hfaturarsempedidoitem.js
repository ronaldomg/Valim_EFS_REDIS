/**@preserve  GeneXus Java 10_3_12-110051 on February 11, 2021 17:44:7.10
*/
gx.evt.autoSkip=!1;gx.define("hfaturarsempedidoitem",!1,function(){var n,t;this.ServerClass="hfaturarsempedidoitem";this.PackageName="";this.setObjectType("web");this.setOnAjaxSessionTimeout("Warn");this.refreshAndEnter=!0;this.hasEnterEvent=!0;this.skipOnEnter=!1;this.addKeyListener("12","'FECHAR'");this.addKeyListener("5","REFRESH");this.addKeyListener("12","CANCEL");this.addKeyListener("1","HELP");this.SetStandaloneVars=function(){this.AV11NotaServicoSeq=gx.fn.getIntegerValue("vNOTASERVICOSEQ",".")};this.s122_client=function(){for(this.AV38TpErro=gx.num.trunc(0,0),this.AV48GXV2=gx.num.trunc(1,0);this.AV48GXV2<=this.AV33SdtItemCPC.length;){if(this.AV37SdtItemCPCItem=this.AV33SdtItemCPC[this.AV48GXV2-1],0==this.AV37SdtItemCPCItem.Valor||""!=this.AV37SdtItemCPCItem.Descricao?0!=this.AV37SdtItemCPCItem.Valor||""==this.AV37SdtItemCPCItem.Descricao||(this.addMessage("Informe o valor quando informar a descrição"),this.AV38TpErro=gx.num.trunc(1,0)):(this.addMessage("Para informar valor informe a descrição"),this.AV38TpErro=gx.num.trunc(1,0)),this.AV38TpErro==1)break;this.AV48GXV2=gx.num.trunc(this.AV48GXV2+1,0)}if(this.AV38TpErro==0){for(this.AV38TpErro=gx.num.trunc(1,0),this.AV49GXV3=gx.num.trunc(1,0);this.AV49GXV3<=this.AV33SdtItemCPC.length;){if(this.AV37SdtItemCPCItem=this.AV33SdtItemCPC[this.AV49GXV3-1],!(0==this.AV37SdtItemCPCItem.Valor)&&!(""==this.AV37SdtItemCPCItem.Descricao)){this.AV38TpErro=gx.num.trunc(0,0);break}this.AV49GXV3=gx.num.trunc(this.AV49GXV3+1,0)}this.AV38TpErro==1&&this.addMessage("Informe pelo menos um item")}if(this.AV38TpErro==0){for(this.AV39VlrTotalItem=0,this.AV50GXV4=gx.num.trunc(1,0);this.AV50GXV4<=this.AV33SdtItemCPC.length;)this.AV37SdtItemCPCItem=this.AV33SdtItemCPC[this.AV50GXV4-1],this.AV39VlrTotalItem=gx.num.add(this.AV39VlrTotalItem,this.AV37SdtItemCPCItem.Valor),this.AV50GXV4=gx.num.trunc(this.AV50GXV4+1,0);this.AV39VlrTotalItem!=this.AV34ValorFatura&&(this.addMessage("Soma dos itens deve ser igual ao total da fatura"),this.AV38TpErro=gx.num.trunc(1,0))}};this.e112fv2_client=function(){this.executeServerEvent("'FECHAR'",!1,null,!1,!1)};this.e122fv2_client=function(){this.executeServerEvent("ENTER",!0,null,!1,!1)};this.e162fv2_client=function(){this.executeServerEvent("CANCEL",!0,arguments[0],!1,!1)};this.GXValidFnc=[];n=this.GXValidFnc;this.GXCtrlIds=[2,5,8,11,13,16,18,23,25,26,27,28,29];this.GXLastCtrlId=29;this.GridContainer=new gx.grid.grid(this,2,"WbpLvl2",24,"Grid","Grid","GridContainer",this.CmpContext,this.IsMasterPage,"hfaturarsempedidoitem",[],!1,1,!1,!0,0,!0,!1,!1,"CollSdtItemCPC.SdtItemCPCItem",0,"px","Novo registro",!0,!1,!1,null,null,!1,"AV33SdtItemCPC",!1,[1,1,1,1]);t=this.GridContainer;t.addSingleLineEdit("GXV10P",25,"CTLDESCRICAO","Descrição","","Descricao","svchar",0,"px",60,60,"left",null,[],"GXV10P","GXV10P",!0,0,!1,!1,"Attribute",1,"");t.addSingleLineEdit("GXV10Q",26,"CTLQTDE","Quantidade","","Qtde","decimal",0,"px",14,14,"right",null,[],"GXV10Q","GXV10Q",!0,2,!1,!1,"Attribute",1,"");t.addSingleLineEdit("GXV10R",27,"CTLVALOR","Vl.Unitário","","Valor","decimal",0,"px",14,14,"right",null,[],"GXV10R","GXV10R",!0,2,!1,!1,"Attribute",1,"");t.addSingleLineEdit("GXV10S",28,"CTLVALORTOTAL","Vl.Total","","ValorTotal","decimal",0,"px",14,14,"right",null,[],"GXV10S","GXV10S",!0,2,!1,!1,"Attribute",1,"");this.setGrid(t);n[2]={fld:"TABLE1",grid:0};n[5]={fld:"TABLE2",grid:0};n[8]={fld:"TABLE3",grid:0};n[11]={fld:"TEXTBLOCK1",format:0,grid:0};n[13]={lvl:0,type:"svchar",len:70,dec:0,sign:!1,ro:0,grid:0,gxgrid:null,fnc:null,isvalid:null,rgrid:[],fld:"vPESSOACODIGONOME",gxz:"ZV14PessoaCodigoNome",gxold:"OV14PessoaCodigoNome",gxvar:"AV14PessoaCodigoNome",ucs:[],op:[],ip:[],nacdep:[],ctrltype:"edit",v2v:function(n){gx.O.AV14PessoaCodigoNome=n},v2z:function(n){gx.O.ZV14PessoaCodigoNome=n},v2c:function(){gx.fn.setControlValue("vPESSOACODIGONOME",gx.O.AV14PessoaCodigoNome,0)},c2v:function(){gx.O.AV14PessoaCodigoNome=this.val()},val:function(){return gx.fn.getControlValue("vPESSOACODIGONOME")},nac:gx.falseFn};n[16]={fld:"TEXTBLOCK3",format:0,grid:0};n[18]={lvl:0,type:"decimal",len:18,dec:2,sign:!1,pic:"ZZZ,ZZZ,ZZZ,ZZZ,ZZ9.99",ro:0,grid:0,gxgrid:null,fnc:null,isvalid:null,rgrid:[],fld:"vVALORFATURA",gxz:"ZV34ValorFatura",gxold:"OV34ValorFatura",gxvar:"AV34ValorFatura",ucs:[],op:[],ip:[],nacdep:[],ctrltype:"edit",v2v:function(n){gx.O.AV34ValorFatura=gx.fn.toDecimalValue(n,",",".")},v2z:function(n){gx.O.ZV34ValorFatura=gx.fn.toDecimalValue(n,".",",")},v2c:function(){gx.fn.setDecimalValue("vVALORFATURA",gx.O.AV34ValorFatura,2,",");typeof this.dom_hdl=="function"&&this.dom_hdl.call(gx.O)},c2v:function(){gx.O.AV34ValorFatura=this.val()},val:function(){return gx.fn.getDecimalValue("vVALORFATURA",".",",")},nac:gx.falseFn};this.declareDomainHdlr(18,function(){});n[23]={fld:"DIV1",format:2,grid:0};n[25]={lvl:2,type:"svchar",len:60,dec:0,sign:!1,ro:1,isacc:0,grid:24,gxgrid:this.GridContainer,fnc:null,isvalid:null,rgrid:[],fld:"CTLDESCRICAO",gxz:"ZV43GXV10P",gxold:"OV43GXV10P",gxvar:"GXV10P",ucs:[],op:[],ip:[],nacdep:[],ctrltype:"edit",inputType:"text",autoCorrect:"1",v2v:function(n){gx.O.GXV10P=n},v2z:function(n){gx.O.ZV43GXV10P=n},v2c:function(n){gx.fn.setGridControlValue("CTLDESCRICAO",n||gx.fn.currentGridRowImpl(24),gx.O.GXV10P,0)},c2v:function(){gx.O.GXV10P=this.val()},val:function(n){return gx.fn.getGridControlValue("CTLDESCRICAO",n||gx.fn.currentGridRowImpl(24))},nac:gx.falseFn};n[26]={lvl:2,type:"decimal",len:14,dec:2,sign:!1,pic:"ZZZZZZZZZZ9.99",ro:1,isacc:0,grid:24,gxgrid:this.GridContainer,fnc:null,isvalid:null,rgrid:[],fld:"CTLQTDE",gxz:"ZV44GXV10Q",gxold:"OV44GXV10Q",gxvar:"GXV10Q",ucs:[],op:[],ip:[],nacdep:[],ctrltype:"edit",inputType:"text",v2v:function(n){gx.O.GXV10Q=gx.fn.toDecimalValue(n,",",".")},v2z:function(n){gx.O.ZV44GXV10Q=gx.fn.toDecimalValue(n,".",",")},v2c:function(n){gx.fn.setGridDecimalValue("CTLQTDE",n||gx.fn.currentGridRowImpl(24),gx.O.GXV10Q,2,",")},c2v:function(){gx.O.GXV10Q=this.val()},val:function(n){return gx.fn.getGridDecimalValue("CTLQTDE",n||gx.fn.currentGridRowImpl(24),".",",")},nac:gx.falseFn};n[27]={lvl:2,type:"decimal",len:14,dec:2,sign:!1,pic:"ZZZZZZZZZZ9.99",ro:1,isacc:0,grid:24,gxgrid:this.GridContainer,fnc:null,isvalid:null,rgrid:[],fld:"CTLVALOR",gxz:"ZV45GXV10R",gxold:"OV45GXV10R",gxvar:"GXV10R",ucs:[],op:[],ip:[],nacdep:[],ctrltype:"edit",inputType:"text",v2v:function(n){gx.O.GXV10R=gx.fn.toDecimalValue(n,",",".")},v2z:function(n){gx.O.ZV45GXV10R=gx.fn.toDecimalValue(n,".",",")},v2c:function(n){gx.fn.setGridDecimalValue("CTLVALOR",n||gx.fn.currentGridRowImpl(24),gx.O.GXV10R,2,",")},c2v:function(){gx.O.GXV10R=this.val()},val:function(n){return gx.fn.getGridDecimalValue("CTLVALOR",n||gx.fn.currentGridRowImpl(24),".",",")},nac:gx.falseFn};n[28]={lvl:2,type:"decimal",len:14,dec:2,sign:!1,pic:"ZZZZZZZZZZ9.99",ro:1,isacc:0,grid:24,gxgrid:this.GridContainer,fnc:null,isvalid:null,rgrid:[],fld:"CTLVALORTOTAL",gxz:"ZV46GXV10S",gxold:"OV46GXV10S",gxvar:"GXV10S",ucs:[],op:[],ip:[],nacdep:[],ctrltype:"edit",inputType:"text",v2v:function(n){gx.O.GXV10S=gx.fn.toDecimalValue(n,",",".")},v2z:function(n){gx.O.ZV46GXV10S=gx.fn.toDecimalValue(n,".",",")},v2c:function(n){gx.fn.setGridDecimalValue("CTLVALORTOTAL",n||gx.fn.currentGridRowImpl(24),gx.O.GXV10S,2,",")},c2v:function(){gx.O.GXV10S=this.val()},val:function(n){return gx.fn.getGridDecimalValue("CTLVALORTOTAL",n||gx.fn.currentGridRowImpl(24),".",",")},nac:gx.falseFn};n[29]={fld:"DIV2",format:2,grid:0};this.AV14PessoaCodigoNome="";this.ZV14PessoaCodigoNome="";this.OV14PessoaCodigoNome="";this.AV34ValorFatura=0;this.ZV34ValorFatura=0;this.OV34ValorFatura=0;this.ZV43GXV10P="";this.OV43GXV10P="";this.ZV44GXV10Q=0;this.OV44GXV10Q=0;this.ZV45GXV10R=0;this.OV45GXV10R=0;this.ZV46GXV10S=0;this.OV46GXV10S=0;this.AV14PessoaCodigoNome="";this.AV34ValorFatura=0;this.AV11NotaServicoSeq=0;this.GXV10P="";this.GXV10Q=0;this.GXV10R=0;this.GXV10S=0;this.A9348NotaServicoSeq=0;this.A11600NotaServicoItemDescricao="";this.A11601NotaServicoItemQuantidade=0;this.A11602NotaServicoItemValorUnitario=0;this.A11603NotaServicoItemValorTotal=0;this.A11590NotaServicoItemSeq=0;this.A11584NotaServicoPessoaFantasia="";this.A11576NotaServicoPessoaId=0;this.A11583NotaServicoVlrAcrDesc=0;this.A11581NotaServicoVlrAdicionalHorario=0;this.A11580NotaServicoVlrM3Faltante=0;this.A11582NotaServicoVlrTaxaBomba=0;this.A11579NotaServicoVlrTotConcreto=0;this.A11575NotaServicoPessoaEmpId="";this.AV50GXV4=0;this.AV39VlrTotalItem=0;this.AV49GXV3=0;this.AV37SdtItemCPCItem={};this.AV33SdtItemCPC=[];this.AV48GXV2=0;this.AV38TpErro=0;this.Events={e112fv2_client:["'FECHAR'",!0],e122fv2_client:["ENTER",!0],e162fv2_client:["CANCEL",!0]};this.EvtParms.REFRESH=[[{av:"GRID_nFirstRecordOnPage"},{av:"GRID_nEOF"},{av:"AV33SdtItemCPC",fld:"vSDTITEMCPC",grid:24},{av:"subGrid_Rows"},{av:"AV11NotaServicoSeq",fld:"vNOTASERVICOSEQ",hsh:!0}],[{ctrl:"CTLQTDE",prop:"Enabled"},{ctrl:"CTLVALORTOTAL",prop:"Enabled"},{ctrl:"CTLDESCRICAO",prop:"Enabled"},{ctrl:"CTLVALOR",prop:"Enabled"},{ctrl:"BTNCONFIRMAR",prop:"Visible"},{ctrl:"CTLQTDE",prop:"Visible"},{ctrl:"CTLVALORTOTAL",prop:"Visible"},{ctrl:"BTNFECHAR",prop:"Visible"}]];this.EvtParms["'FECHAR'"]=[[{av:"AV33SdtItemCPC",fld:"vSDTITEMCPC",grid:24}],[]];this.EvtParms.ENTER=[[{av:"AV38TpErro",fld:"vTPERRO"},{av:"AV33SdtItemCPC",fld:"vSDTITEMCPC",grid:24},{av:"AV34ValorFatura",fld:"vVALORFATURA"}],[{av:"AV38TpErro",fld:"vTPERRO"},{av:"AV48GXV2",fld:"vGXV2"},{av:"AV37SdtItemCPCItem",fld:"vSDTITEMCPCITEM"},{av:"AV49GXV3",fld:"vGXV3"},{av:"AV39VlrTotalItem",fld:"vVLRTOTALITEM"},{av:"AV50GXV4",fld:"vGXV4"}]];this.EvtParms.GRID_FIRSTPAGE=[[{av:"GRID_nFirstRecordOnPage"},{av:"GRID_nEOF"},{av:"subGrid_Rows"},{av:"AV11NotaServicoSeq",fld:"vNOTASERVICOSEQ",hsh:!0},{av:"AV33SdtItemCPC",fld:"vSDTITEMCPC",grid:24}],[{ctrl:"CTLQTDE",prop:"Enabled"},{ctrl:"CTLVALORTOTAL",prop:"Enabled"},{ctrl:"CTLDESCRICAO",prop:"Enabled"},{ctrl:"CTLVALOR",prop:"Enabled"},{ctrl:"BTNCONFIRMAR",prop:"Visible"},{ctrl:"CTLQTDE",prop:"Visible"},{ctrl:"CTLVALORTOTAL",prop:"Visible"},{ctrl:"BTNFECHAR",prop:"Visible"}]];this.EvtParms.GRID_PREVPAGE=[[{av:"GRID_nFirstRecordOnPage"},{av:"GRID_nEOF"},{av:"subGrid_Rows"},{av:"AV11NotaServicoSeq",fld:"vNOTASERVICOSEQ",hsh:!0},{av:"AV33SdtItemCPC",fld:"vSDTITEMCPC",grid:24}],[{ctrl:"CTLQTDE",prop:"Enabled"},{ctrl:"CTLVALORTOTAL",prop:"Enabled"},{ctrl:"CTLDESCRICAO",prop:"Enabled"},{ctrl:"CTLVALOR",prop:"Enabled"},{ctrl:"BTNCONFIRMAR",prop:"Visible"},{ctrl:"CTLQTDE",prop:"Visible"},{ctrl:"CTLVALORTOTAL",prop:"Visible"},{ctrl:"BTNFECHAR",prop:"Visible"}]];this.EvtParms.GRID_NEXTPAGE=[[{av:"GRID_nFirstRecordOnPage"},{av:"GRID_nEOF"},{av:"subGrid_Rows"},{av:"AV11NotaServicoSeq",fld:"vNOTASERVICOSEQ",hsh:!0},{av:"AV33SdtItemCPC",fld:"vSDTITEMCPC",grid:24}],[{ctrl:"CTLQTDE",prop:"Enabled"},{ctrl:"CTLVALORTOTAL",prop:"Enabled"},{ctrl:"CTLDESCRICAO",prop:"Enabled"},{ctrl:"CTLVALOR",prop:"Enabled"},{ctrl:"BTNCONFIRMAR",prop:"Visible"},{ctrl:"CTLQTDE",prop:"Visible"},{ctrl:"CTLVALORTOTAL",prop:"Visible"},{ctrl:"BTNFECHAR",prop:"Visible"}]];this.EvtParms.GRID_LASTPAGE=[[{av:"GRID_nFirstRecordOnPage"},{av:"GRID_nEOF"},{av:"subGrid_Rows"},{av:"AV11NotaServicoSeq",fld:"vNOTASERVICOSEQ",hsh:!0},{av:"AV33SdtItemCPC",fld:"vSDTITEMCPC",grid:24}],[{ctrl:"CTLQTDE",prop:"Enabled"},{ctrl:"CTLVALORTOTAL",prop:"Enabled"},{ctrl:"CTLDESCRICAO",prop:"Enabled"},{ctrl:"CTLVALOR",prop:"Enabled"},{ctrl:"BTNCONFIRMAR",prop:"Visible"},{ctrl:"CTLQTDE",prop:"Visible"},{ctrl:"CTLVALORTOTAL",prop:"Visible"},{ctrl:"BTNFECHAR",prop:"Visible"}]];this.EnterCtrl=["BTNCONFIRMAR"];this.setVCMap("AV11NotaServicoSeq","vNOTASERVICOSEQ",0,"int");this.setVCMap("AV11NotaServicoSeq","vNOTASERVICOSEQ",0,"int");t.addRefreshingVar({rfrVar:"AV11NotaServicoSeq"});this.addGridBCProperty("Sdtitemcpc",["Descricao"],this.GXValidFnc[25],"AV33SdtItemCPC");this.addGridBCProperty("Sdtitemcpc",["Qtde"],this.GXValidFnc[26],"AV33SdtItemCPC");this.addGridBCProperty("Sdtitemcpc",["Valor"],this.GXValidFnc[27],"AV33SdtItemCPC");this.addGridBCProperty("Sdtitemcpc",["ValorTotal"],this.GXValidFnc[28],"AV33SdtItemCPC");this.InitStandaloneVars()});gx.setParentObj(new hfaturarsempedidoitem)